{"ast":null,"code":"import { createRouter, createWebHistory } from \"vue-router\";\nimport Login from \"@/views/auth/login\";\nimport SignUp from \"@/views/auth/signUp\";\nimport StudiesList from \"@/views/studies/studiesList\";\nimport PatientsList from \"@/views/studies/patientsList\";\nimport HealthUser from \"@/views/patients/healthKit/healthKitUser\";\nimport categoryDetail from \"@/views/patients/healthKit/categoryDetail\";\nimport registerDoctor from \"@/views/auth/registerDoctor\";\nimport surveysList from \"@/views/surveys/surveysList\";\nimport surveyDetail from \"@/views/surveys/surveysDetail\";\nimport surveyUser from \"@/views/surveys/surveyUser\";\nimport surveyScheduler from '@/views/surveys/surveyScheduler';\nimport store from \"@/store\";\nimport surveysBuilder from \"@/views/surveys/surveysBuilder\";\nimport editSurveyBuilder from \"@/components/surveys/SurveyBuilder/editSurveyBuilder.vue\";\nimport categories from '@/components/patients/healthKit/categoryList';\nimport healthKitGraphs from '@/views/patients/healthKit/healthKitGraphs';\nimport shareHome from '@/views/share/shareHome';\nconst routes = [{\n  path: \"/\",\n  name: \"Home\",\n  redirect: \"/studies\",\n  component: () => import('@/common/layout/Main'),\n  meta: {\n    requiresAuth: true\n  },\n  children: [{\n    path: \"/studies\",\n    name: \"studies\",\n    component: StudiesList,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: \"/patients/:studyId\",\n    name: \"patients\",\n    component: PatientsList,\n    props: true,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: \"/healthKitUser\",\n    name: \"healthUser\",\n    component: HealthUser,\n    meta: {\n      requiresAuth: true\n    },\n    props: true,\n    redirect: {\n      name: \"categories\"\n    },\n    children: [{\n      name: \"categories\",\n      path: '',\n      component: categories\n    }, {\n      name: \"category\",\n      path: 'category/:categoryId',\n      component: categoryDetail\n    }, {\n      name: \"statistic\",\n      path: 'statistic/:hkCode',\n      component: healthKitGraphs\n    }]\n  }, {\n    path: \"/healthGraph/:studyId/:userId/:hkCode\",\n    name: \"healthGraph\",\n    component: () => import('@/views/patients/healthKit/healthKitGraphs'),\n    props: true,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: \"/categoryDetail/:studyId/:userId/:categoryId\",\n    name: \"categoryDetail\",\n    component: categoryDetail,\n    props: true,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: \"/register\",\n    name: \"register\",\n    component: registerDoctor,\n    props: true,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: \"/surveysList/:studyId\",\n    name: \"surveysList\",\n    component: surveysList,\n    props: true,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: \"/surveyDetail/:studyId/:surveyId\",\n    name: \"surveyDetail\",\n    component: surveyDetail,\n    props: true,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: \"/surveysBuilder/:studyId\",\n    name: \"surveysBuilder\",\n    component: surveysBuilder,\n    props: true,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: \"/surveyScheduler/:studyId\",\n    name: \"surveyScheduler\",\n    component: surveyScheduler,\n    props: true,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: \"/edit/surveyBuilder/:studyId/:surveyId\",\n    name: \"editSurveyBuilder\",\n    component: editSurveyBuilder,\n    props: true,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: \"/surveyUser\",\n    name: \"surveyUser\",\n    component: surveyUser,\n    props: true,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: \"/share/:studyId\",\n    name: \"share\",\n    component: shareHome,\n    props: true,\n    meta: {\n      requiresAuth: true\n    }\n  }]\n}, {\n  path: \"/about\",\n  name: \"About\",\n  // route level code-splitting\n  // this generates a separate chunk (about.[hash].js) for this route\n  // which is lazy-loaded when the route is visited.\n  component: () => import(\n  /* webpackChunkName: \"about\" */\n  \"../views/About.vue\")\n}, {\n  path: \"/login\",\n  name: \"Login\",\n  component: Login\n}, {\n  path: \"/signup\",\n  name: \"signup\",\n  component: SignUp,\n  meta: {\n    requiresAuth: true\n  }\n}];\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  store.dispatch(\"user/FetchUserRolesAndStudies\");\n\n  if (process.env.VUE_APP_AUTH_MODE == \"firebase\") {\n    let {\n      auth\n    } = require(\"@/plugins/firebase/firebase\");\n\n    let unsubscribe = auth.onAuthStateChanged(function (user) {\n      if (user) {\n        if (to.name == \"Login\") {\n          next({\n            name: 'Home'\n          });\n        } else {\n          next();\n        }\n      } else {\n        if (to.matched.some(record => record.meta.requiresAuth && to.name != \"Login\")) {\n          next({\n            name: 'Login'\n          });\n        } else {\n          next();\n        }\n      }\n\n      unsubscribe();\n    });\n  } else {}\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","Login","SignUp","StudiesList","PatientsList","HealthUser","categoryDetail","registerDoctor","surveysList","surveyDetail","surveyUser","surveyScheduler","store","surveysBuilder","editSurveyBuilder","categories","healthKitGraphs","shareHome","routes","path","name","redirect","component","meta","requiresAuth","children","props","router","history","beforeEach","to","from","next","dispatch","process","env","VUE_APP_AUTH_MODE","auth","require","unsubscribe","onAuthStateChanged","user","matched","some","record"],"sources":["/Users/chrislim/Desktop/USC/Senior Fall/CSCI401/CardinalKit-Web-Dashboard/cardinal-kit-web/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from \"vue-router\";\nimport Login from \"@/views/auth/login\";\nimport SignUp from \"@/views/auth/signUp\";\nimport StudiesList from \"@/views/studies/studiesList\";\nimport PatientsList from \"@/views/studies/patientsList\";\nimport HealthUser from \"@/views/patients/healthKit/healthKitUser\";\nimport categoryDetail from \"@/views/patients/healthKit/categoryDetail\";\nimport registerDoctor from \"@/views/auth/registerDoctor\"\nimport surveysList from \"@/views/surveys/surveysList\"\nimport surveyDetail from \"@/views/surveys/surveysDetail\"\nimport surveyUser from \"@/views/surveys/surveyUser\"\nimport surveyScheduler from '@/views/surveys/surveyScheduler'\nimport store from \"@/store\";\nimport surveysBuilder from \"@/views/surveys/surveysBuilder\"\nimport editSurveyBuilder from \"@/components/surveys/SurveyBuilder/editSurveyBuilder.vue\"\nimport categories from '@/components/patients/healthKit/categoryList'\nimport healthKitGraphs from '@/views/patients/healthKit/healthKitGraphs'\nimport shareHome from '@/views/share/shareHome'\n\n\nconst routes = [\n  {\n    path: \"/\",\n    name: \"Home\",\n    redirect: \"/studies\",\n    component: () => import('@/common/layout/Main'),\n    meta: {\n      requiresAuth: true,\n    },\n    children: [\n      {\n        path: \"/studies\",\n        name: \"studies\",\n        component: StudiesList,\n        meta: {\n          requiresAuth: true,\n        },\n      },\n      {\n        path: \"/patients/:studyId\",\n        name: \"patients\",\n        component: PatientsList,\n        props: true,\n        meta: {\n          requiresAuth: true,\n        },\n      },\n      {\n        path: \"/healthKitUser\",\n        name: \"healthUser\",\n        component: HealthUser,\n        meta: {\n          requiresAuth: true,\n        },\n        props: true,\n        redirect: {name: \"categories\"},\n        children: [\n          { \n            name: \"categories\", path: '', component: categories,\n          },\n          { \n            name: \"category\", path: 'category/:categoryId', component: categoryDetail \n          },\n          { \n            name: \"statistic\", path: 'statistic/:hkCode', component: healthKitGraphs \n          }\n        ]\n      },\n      {\n        path: \"/healthGraph/:studyId/:userId/:hkCode\",\n        name: \"healthGraph\",\n        component: () => import('@/views/patients/healthKit/healthKitGraphs'),\n        props: true,\n        meta: {\n          requiresAuth: true,\n        },\n      },\n      {\n        path: \"/categoryDetail/:studyId/:userId/:categoryId\",\n        name: \"categoryDetail\",\n        component: categoryDetail,\n        props:true,\n        meta: {\n          requiresAuth: true,\n        },\n      },\n      {\n        path: \"/register\",\n        name: \"register\",\n        component: registerDoctor,\n        props:true,\n        meta: {\n          requiresAuth: true,\n        },\n      },\n      {\n        path: \"/surveysList/:studyId\",\n        name: \"surveysList\",\n        component: surveysList,\n        props:true,\n        meta: {\n          requiresAuth: true,\n        },\n      },\n      {\n        path: \"/surveyDetail/:studyId/:surveyId\",\n        name: \"surveyDetail\",\n        component: surveyDetail,\n        props:true,\n        meta: {\n          requiresAuth: true,\n        }\n      },\n      {\n        path: \"/surveysBuilder/:studyId\",\n        name: \"surveysBuilder\",\n        component: surveysBuilder,\n        props:true,\n        meta: {\n          requiresAuth: true,\n        }\n      },\n      {\n        path: \"/surveyScheduler/:studyId\",\n        name: \"surveyScheduler\",\n        component: surveyScheduler,\n        props:true,\n        meta: {\n          requiresAuth: true,\n        }\n      },\n      {\n        path: \"/edit/surveyBuilder/:studyId/:surveyId\",\n        name: \"editSurveyBuilder\",\n        component: editSurveyBuilder,\n        props:true,\n        meta: {\n          requiresAuth: true,\n        },\n      },\n      {\n        path: \"/surveyUser\",\n        name: \"surveyUser\",\n        component: surveyUser,\n        props:true,\n        meta: {\n          requiresAuth: true,\n        },        \n      },\n      {\n        path: \"/share/:studyId\",\n        name: \"share\",\n        component: shareHome,\n        props:true,\n        meta: {\n          requiresAuth: true,\n        },        \n      },\n    ]\n  },\n  {\n    path: \"/about\",\n    name: \"About\",\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: () =>\n      import(/* webpackChunkName: \"about\" */ \"../views/About.vue\"),\n  },\n  {\n    path: \"/login\",\n    name: \"Login\",\n    component: Login,\n  },\n  {\n    path: \"/signup\",\n    name: \"signup\",\n    component: SignUp,\n    meta: {\n      requiresAuth: true,\n    },\n  },\n];\n\nconst router = createRouter({\n  history: createWebHistory(),\n  routes,\n});\n\nrouter.beforeEach((to, from, next) => {\n  store.dispatch(\"user/FetchUserRolesAndStudies\")\n  if (process.env.VUE_APP_AUTH_MODE == \"firebase\") {\n    let { auth } = require(\"@/plugins/firebase/firebase\");\n    let unsubscribe = auth.onAuthStateChanged(function(user){\n        if (user) {\n          if(to.name==\"Login\"){\n            next({name:'Home'})\n          }\n          else{\n            next()\n          }\n        } else {\n          \n          \n          if (to.matched.some((record) => record.meta.requiresAuth && to.name!=\"Login\")) {\n            next({name:'Login'})\n          }\n          else{\n            next()\n          }\n        }\n        unsubscribe()\n    });\n  } else {\n\n  }\n});\n\n\nexport default router;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}