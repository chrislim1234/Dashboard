{"ast":null,"code":"import { db } from '@/plugins/firebase/firebase';\nexport class Ref {\n  constructor(object, method, payload = null) {\n    this.object = object;\n    this.method = method;\n    this.payload = payload;\n  }\n\n  WHERE(params) {\n    this.object = this.object.where(params[0], params[1], params[2]);\n    return this;\n  }\n\n  LIMIT(limit) {\n    this.object = this.object.limit(limit);\n    return this;\n  }\n\n  ORDER_BY(name, desc = false) {\n    this.object = this.object.orderBy(name, desc ? 'desc' : 'asc');\n    return this;\n  }\n\n  async Execute() {\n    switch (this.method) {\n      case \"GET\":\n        return await this.object.get();\n\n      case \"ADD\":\n        return await this.object.add(this.payload);\n\n      case \"SET\":\n        return await this.object.set(this.payload);\n\n      case \"UPDATE\":\n        return await this.object.set(this.payload, {\n          merge: true\n        });\n\n      case \"DELETE\":\n        return await this.object.delete();\n\n      default:\n        return await this.object.get();\n    }\n  }\n\n  CLONE() {\n    return new Ref(this.object, this.method, this.payload);\n  }\n\n}\n\nconst objectFirebase = path => {\n  let parts = path.split('/');\n  let object;\n\n  if (parts.length % 2 != 0) {\n    object = db.collection(path);\n  } else {\n    object = db.doc(path);\n  }\n\n  return object;\n};\n\nexport const GET = path => {\n  let object = objectFirebase(path);\n  return new Ref(object, \"GET\");\n};\nexport const POST = (path, payload) => {\n  let object = objectFirebase(path);\n\n  if (payload.emptyDoc) {\n    return new Ref(object, \"ADD\", payload.data);\n  } else {\n    return new Ref(object, \"SET\", payload.data);\n  }\n};\nexport const PATH = (path, payload) => {\n  let object = objectFirebase(path);\n  return new Ref(object, \"SET\", payload.data);\n};\nexport const PUT = (path, payload) => {\n  let object = objectFirebase(path);\n  return new Ref(object, \"UPDATE\", payload.data);\n};\nexport const DELETE = (path, payload) => {\n  let object = objectFirebase(path);\n  return new Ref(object, \"DELETE\");\n};","map":{"version":3,"names":["db","Ref","constructor","object","method","payload","WHERE","params","where","LIMIT","limit","ORDER_BY","name","desc","orderBy","Execute","get","add","set","merge","delete","CLONE","objectFirebase","path","parts","split","length","collection","doc","GET","POST","emptyDoc","data","PATH","PUT","DELETE"],"sources":["/Users/chrislim/Desktop/USC/Senior Fall/CSCI401/CardinalKit-Web-Dashboard/cardinal-kit-web/src/Rest/firebase/index.js"],"sourcesContent":["import {db} from '@/plugins/firebase/firebase'\n\nexport class Ref {\n    constructor(object, method, payload = null) {\n        this.object = object\n        this.method = method\n        this.payload = payload\n    }\n    WHERE(params) {\n        this.object = this.object.where(params[0], params[1], params[2])\n        return this\n    }\n    LIMIT(limit) {\n        this.object = this.object.limit(limit)\n        return this\n    }\n    ORDER_BY(name, desc = false) {\n        this.object = this.object.orderBy(name, desc ? 'desc' : 'asc')\n        return this\n    }\n    async Execute() {\n        switch (this.method) {\n            case \"GET\":\n                return await this.object.get()\n            case \"ADD\":\n                return await this.object.add(this.payload)\n            case \"SET\":\n                return await this.object.set(this.payload)\n            case \"UPDATE\":\n                return await this.object.set(this.payload,{merge:true})\n            case \"DELETE\":\n                return await this.object.delete()\n            default:\n                return await this.object.get()\n        }\n    }\n\n    CLONE(){\n        return new Ref(this.object,this.method,this.payload)\n    }\n}\nconst objectFirebase = (path) => {\n    let parts = path.split('/')\n    \n    let object\n    if(parts.length%2!=0){\n        object = db.collection(path);\n    }\n    else{\n        object = db.doc(path);\n    }\n    return object\n}\n\nexport const GET= (path)=>{\n    let object = objectFirebase(path)\n    return new Ref(object,\"GET\")    \n}\n\nexport const  POST= (path,payload)=>{\n    let object = objectFirebase(path)\n    if(payload.emptyDoc){\n        return new Ref(object,\"ADD\",payload.data)\n    }\n    else{\n        return new Ref(object,\"SET\",payload.data)\n    }\n}\n\nexport const PATH= (path,payload)=>{\n    let object = objectFirebase(path)\n    return new Ref(object,\"SET\",payload.data)\n}\n\nexport const  PUT= (path,payload)=>{\n    let object = objectFirebase(path)\n    return new Ref(object,\"UPDATE\",payload.data)\n\n}\n\nexport const DELETE=(path,payload)=>{\n    let object = objectFirebase(path)\n    return new Ref(object,\"DELETE\")\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}