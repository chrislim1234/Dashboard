{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport request from \"@/Rest\";\nexport function reset({\n  commit\n}) {\n  commit(\"RESET\");\n}\nexport const FetchAllStudies = async ({\n  commit\n}) => {\n  let studies = [];\n  const studiesSnap = await request.GET(\"studies\").Execute();\n  studiesSnap.forEach(study => {\n    studies.push({\n      id: study.id,\n      text: study.id,\n      ...study.data()\n    });\n  });\n  commit(\"saveStudies\", studies);\n  return studies;\n};\nexport const FetchStudyHealthData = async ({\n  commit\n}, payload) => {\n  let allRecords = [];\n  const dataSnap = await request.GET(`studies/${payload.studyId}/users`).Execute();\n  allRecords = await Promise.all(dataSnap.docs.map(async user => {\n    const userSnap = await request.GET(`studies/${payload.studyId}/users/${user.id}/healthFhir`);\n    const records = userSnap.docs.map(record => {\n      return record.data();\n    });\n    return records;\n  }));\n  commit(\"saveRecords\", allRecords);\n};\nexport const FetchUsers = async ({\n  commit\n}, payload) => {\n  let allUsers = [];\n  const usersSnap = await request.GET(`studies/${payload.studyId}/users`).Execute();\n  allUsers = usersSnap.docs.map(record => {\n    return {\n      id: record.id,\n      ...record.data()\n    };\n  });\n  commit(\"SaveUsers\", {\n    idStudy: payload.studyId,\n    users: allUsers\n  });\n};","map":{"version":3,"names":["request","reset","commit","FetchAllStudies","studies","studiesSnap","GET","Execute","forEach","study","push","id","text","data","FetchStudyHealthData","payload","allRecords","dataSnap","studyId","Promise","all","docs","map","user","userSnap","records","record","FetchUsers","allUsers","usersSnap","idStudy","users"],"sources":["/Users/chrislim/Desktop/USC/Senior Fall/CSCI401/CardinalKit-Web-Dashboard/cardinal-kit-web/src/store/modules/studies/actions.js"],"sourcesContent":["import request from \"@/Rest\";\n\nexport function reset({ commit }) {\n  commit(\"RESET\");\n}\n\nexport const FetchAllStudies = async ({ commit }) => {\n  let studies = [];\n  const studiesSnap = await request.GET(\"studies\").Execute();\n  studiesSnap.forEach((study) => {\n    studies.push({\n      id: study.id,\n      text: study.id,\n      ...study.data(),\n    });\n  });\n  commit(\"saveStudies\", studies);\n  return studies\n};\n\nexport const FetchStudyHealthData = async ({ commit }, payload) => {\n  let allRecords = [];\n  const dataSnap = await request.GET(`studies/${payload.studyId}/users`).Execute();\n  allRecords = await Promise.all(dataSnap.docs.map(async (user) => {\n    const userSnap = await request.GET(\n      `studies/${payload.studyId}/users/${user.id}/healthFhir`\n    );\n    const records = userSnap.docs.map((record) => {\n      return record.data()\n    })\n    return records\n  }));\n  commit(\"saveRecords\", allRecords);\n};\n\n\nexport const FetchUsers = async ({commit},payload)=>{\n  let allUsers = [];\n  const usersSnap = await request.GET(`studies/${payload.studyId}/users`).Execute();\n  allUsers = usersSnap.docs.map((record) => {\n    return {id:record.id,...record.data()}\n  })\n  commit(\"SaveUsers\", {idStudy:payload.studyId,users:allUsers})\n}\n\n"],"mappings":";AAAA,OAAOA,OAAP,MAAoB,QAApB;AAEA,OAAO,SAASC,KAAT,CAAe;EAAEC;AAAF,CAAf,EAA2B;EAChCA,MAAM,CAAC,OAAD,CAAN;AACD;AAED,OAAO,MAAMC,eAAe,GAAG,OAAO;EAAED;AAAF,CAAP,KAAsB;EACnD,IAAIE,OAAO,GAAG,EAAd;EACA,MAAMC,WAAW,GAAG,MAAML,OAAO,CAACM,GAAR,CAAY,SAAZ,EAAuBC,OAAvB,EAA1B;EACAF,WAAW,CAACG,OAAZ,CAAqBC,KAAD,IAAW;IAC7BL,OAAO,CAACM,IAAR,CAAa;MACXC,EAAE,EAAEF,KAAK,CAACE,EADC;MAEXC,IAAI,EAAEH,KAAK,CAACE,EAFD;MAGX,GAAGF,KAAK,CAACI,IAAN;IAHQ,CAAb;EAKD,CAND;EAOAX,MAAM,CAAC,aAAD,EAAgBE,OAAhB,CAAN;EACA,OAAOA,OAAP;AACD,CAZM;AAcP,OAAO,MAAMU,oBAAoB,GAAG,OAAO;EAAEZ;AAAF,CAAP,EAAmBa,OAAnB,KAA+B;EACjE,IAAIC,UAAU,GAAG,EAAjB;EACA,MAAMC,QAAQ,GAAG,MAAMjB,OAAO,CAACM,GAAR,CAAa,WAAUS,OAAO,CAACG,OAAQ,QAAvC,EAAgDX,OAAhD,EAAvB;EACAS,UAAU,GAAG,MAAMG,OAAO,CAACC,GAAR,CAAYH,QAAQ,CAACI,IAAT,CAAcC,GAAd,CAAkB,MAAOC,IAAP,IAAgB;IAC/D,MAAMC,QAAQ,GAAG,MAAMxB,OAAO,CAACM,GAAR,CACpB,WAAUS,OAAO,CAACG,OAAQ,UAASK,IAAI,CAACZ,EAAG,aADvB,CAAvB;IAGA,MAAMc,OAAO,GAAGD,QAAQ,CAACH,IAAT,CAAcC,GAAd,CAAmBI,MAAD,IAAY;MAC5C,OAAOA,MAAM,CAACb,IAAP,EAAP;IACD,CAFe,CAAhB;IAGA,OAAOY,OAAP;EACD,CAR8B,CAAZ,CAAnB;EASAvB,MAAM,CAAC,aAAD,EAAgBc,UAAhB,CAAN;AACD,CAbM;AAgBP,OAAO,MAAMW,UAAU,GAAG,OAAO;EAACzB;AAAD,CAAP,EAAgBa,OAAhB,KAA0B;EAClD,IAAIa,QAAQ,GAAG,EAAf;EACA,MAAMC,SAAS,GAAG,MAAM7B,OAAO,CAACM,GAAR,CAAa,WAAUS,OAAO,CAACG,OAAQ,QAAvC,EAAgDX,OAAhD,EAAxB;EACAqB,QAAQ,GAAGC,SAAS,CAACR,IAAV,CAAeC,GAAf,CAAoBI,MAAD,IAAY;IACxC,OAAO;MAACf,EAAE,EAACe,MAAM,CAACf,EAAX;MAAc,GAAGe,MAAM,CAACb,IAAP;IAAjB,CAAP;EACD,CAFU,CAAX;EAGAX,MAAM,CAAC,WAAD,EAAc;IAAC4B,OAAO,EAACf,OAAO,CAACG,OAAjB;IAAyBa,KAAK,EAACH;EAA/B,CAAd,CAAN;AACD,CAPM"},"metadata":{},"sourceType":"module"}